# Repository Guidelines

## Project Structure & Module Organization
`docker-compose.yml` links the Ollama model host, LangGraph backend, Next.js frontend, and Neo4j stack. Backend code lives in `backend/src`: LangGraph flows under `agent/`, APIs in `api/`, and shared helpers in `utils/` and `services/`. Frontend code sits in `frontend/src` with the route tree in `app/` plus `components/`, `hooks/`, `lib/`, and `providers/`. Assets live in `media/`.

## Build, Test, and Development Commands
- `./setup.sh` — install dependencies, pull models, and launch the default stack in Docker.
- `docker-compose up -d` / `docker-compose down` — start or stop the full agent suite.
- `cd backend && uv sync && uv run langgraph dev --config langgraph.json` — run the backend locally with hot reload.
- `cd backend && uv run ruff check` — lint Python modules.
- `cd frontend && pnpm install && pnpm dev` — start the Next.js UI; run `pnpm build` for production bundles and `pnpm lint` or `pnpm format:check` to gate commits.
- `docker ps` / `docker exec -it agent-backend-c /bin/bash` — inspect containers or open a shell for quick debugging.

## Coding Style & Naming Conventions
Python code uses four-space indentation and type hints. Ruff (see `backend/pyproject.toml`) enforces pycodestyle, Pyflakes, import sorting, and Google docstrings; place new modules under `src/<domain>` and name tests `test_<feature>.py`. Frontend files use TypeScript, React Server Components, and Tailwind; keep directories kebab-case, components PascalCase, and run `pnpm format` to apply Prettier and Tailwind rules before committing.

## Testing Guidelines
Backend tests rely on `pytest` (`uv run pytest`), with fixtures expected under `backend/tests`. Cover new helpers and graph nodes, and add integration checks for Neo4j flows using test containers. Frontend currently lacks automation—if you introduce a runner, place specs in `frontend/src/__tests__` (or `__e2e__/` for Playwright) and update this file.

## Commit & Pull Request Guidelines
Use short, descriptive, lower-case subjects. Keep them under ~60 characters and add a brief body when multiple modules change. For pull requests, state problem/solution, list impacted services (backend, frontend, infra), link issues, and attach screenshots for UI or workflow updates. Call out required migrations or env changes so reviewers can reproduce the stack.

## Environment & Configuration Notes
Environment variables come from `.env`, generated by `setup.sh`; keep secrets local. Neo4j data persists in the `neo4j_data` volume, and Ollama models live under `ollama-custom/.ollama`. When adjusting credentials or graph schema, update the defaults and onboarding docs so the Docker stack stays reproducible.
